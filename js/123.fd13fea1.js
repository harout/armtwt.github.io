"use strict";(globalThis["webpackChunktwitter_stats_display"]=globalThis["webpackChunktwitter_stats_display"]||[]).push([[123],{1123:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J});var l=a(9835),o=a(6970);const r={class:"col-xs-12 col-sm-12 col-md-12"},d={class:"row q-mt-md text-h5"},s={class:"row q-mt-md q-gutter-sm"},n={class:"row q-col-gutter-md q-mt-md q-mr-md q-ml-md"},u={class:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},i={class:"row q-col-gutter-md q-mt-md q-mr-md q-ml-md"},f={class:"col-xs-12 col-sm-12 col-md-12 col-lg-12"};function m(e,t,a,m,w,g){const c=(0,l.up)("q-btn"),p=(0,l.up)("ReportPeriodSelector"),D=(0,l.up)("DiffOfAggregateStatsByTag"),_=(0,l.up)("DiffOfWordUsageByTag"),v=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(v,{class:"row q-pl-md q-pr-md q-pb-lg"},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l._)("div",d," Twitter Statistics for "+(0,o.zw)(m.dateRange.from)+" to "+(0,o.zw)(m.dateRange.to)+" vs. "+(0,o.zw)(m.dateRange.previousFrom)+" to "+(0,o.zw)(m.dateRange.previousTo),1),(0,l._)("div",s,[(0,l.Wm)(c,{type:"a",href:"./#/",label:"< Main Report",push:""}),(0,l.Wm)(p,{from:m.dateRange.from,to:m.dateRange.to,onReportRequested:m.handleReportRequested},null,8,["from","to","onReportRequested"])]),(0,l._)("div",n,[(0,l._)("div",u,[(0,l.Wm)(D,{series:m.diffOfAggregateStatsByTag},null,8,["series"])])]),(0,l._)("div",i,[(0,l._)("div",f,[(0,l.Wm)(_,{wordSetDiffs:m.diffOfWordUsageByTag},null,8,["wordSetDiffs"])])])])])),_:1})}a(9665);var w=a(499),g=a(4170),c=a(3703),p=a(1446),D=a(1168);const _={class:""};function v(e,t,a,r,d,s){const n=(0,l.up)("q-td"),u=(0,l.up)("q-table");return(0,l.wg)(),(0,l.iD)("div",_,[(0,l.Wm)(u,{title:"Percentage Increase/Decrese for Aggregate Stats Over Period by Tag",rows:a.series,columns:r.columns,pagination:r.pagination,"row-key":"tag",dense:"","binary-state-sort":""},{"body-cell":(0,l.w5)((e=>[(0,l.Wm)(n,{props:e},{default:(0,l.w5)((()=>[(0,l._)("span",{class:(0,o.C_)(e.value<=0?"negativePercentage":"positivePercentage")},(0,o.zw)(e.value)+"%",3)])),_:2},1032,["props"])])),"body-cell-tag":(0,l.w5)((e=>[(0,l.Wm)(n,{props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.value),1)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination"])])}const W={props:{series:{required:!0,type:Object}},setup(e){const t={rowsPerPage:100,sortBy:"interactionsDiff",descending:!0},a=[{name:"tag",label:"Tag",field:"tag",sortable:!0,align:"left"},{name:"interactionsDiff",label:"Interactions",field:"interactionsDiff",sortable:!0,align:"right"},{name:"tweetsDiff",label:"Tweets",field:"tweetsDiff",sortable:!0,sort:(e,t,a,l)=>parseInt(e,10)-parseInt(t,10),align:"right"},{name:"likesDiff",label:"Likes",field:"likesDiff",sortable:!0,align:"right"},{name:"quotesDiff",label:"Quote Tweets",field:"quotesDiff",sortable:!0,align:"right"},{name:"retweetsDiff",label:"Retweets",field:"retweetsDiff",sortable:!0,align:"right"},{name:"repliesDiff",label:"Replies",field:"repliesDiff",sortable:!0,align:"right"}];return{columns:a,pagination:t}}};var b=a(1639),Y=a(4356),y=a(7220),k=a(9984),q=a.n(k);const S=(0,b.Z)(W,[["render",v]]),h=S;q()(W,"components",{QTable:Y.Z,QTd:y.Z});const M={class:"row col-12 q-gutter-sm justify-between"},T={class:"col"},Z={class:"col"},U={class:"col"};function R(e,t,a,r,d,s){const n=(0,l.up)("q-select"),u=(0,l.up)("q-card-section"),i=(0,l.up)("q-item-label"),f=(0,l.up)("q-item-section"),m=(0,l.up)("q-item"),w=(0,l.up)("q-list"),g=(0,l.up)("q-card"),c=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("div",T,[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{modelValue:r.tagA,"onUpdate:modelValue":t[0]||(t[0]=e=>r.tagA=e),options:r.tagsInA,label:"Select a Tag"},null,8,["modelValue","options"])])),_:1}),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{header:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Added")])),_:1}),(0,l.Wm)(w,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.wordData["a"]["added"],(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{key:e},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[c]]))),128))])),_:1}),(0,l.Wm)(i,{header:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Retained")])),_:1}),(0,l.Wm)(w,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.wordData["a"]["retained"],(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{key:e},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[c]]))),128))])),_:1}),(0,l.Wm)(i,{header:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Dropped")])),_:1}),(0,l.Wm)(w,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.wordData["a"]["dropped"],(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{key:e},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[c]]))),128))])),_:1})])),_:1})])),_:1})]),(0,l._)("div",Z,[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{modelValue:r.tagB,"onUpdate:modelValue":t[1]||(t[1]=e=>r.tagB=e),options:r.tagsInB,label:"Select a Tag"},null,8,["modelValue","options"])])),_:1}),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{header:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Added")])),_:1}),(0,l.Wm)(w,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.wordData["b"]["added"],(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{key:e},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[c]]))),128))])),_:1}),(0,l.Wm)(i,{header:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Retained")])),_:1}),(0,l.Wm)(w,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.wordData["b"]["retained"],(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{key:e},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[c]]))),128))])),_:1}),(0,l.Wm)(i,{header:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Dropped")])),_:1}),(0,l.Wm)(w,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.wordData["b"]["dropped"],(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{key:e},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[c]]))),128))])),_:1})])),_:1})])),_:1})]),(0,l._)("div",U,[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{modelValue:r.tagC,"onUpdate:modelValue":t[2]||(t[2]=e=>r.tagC=e),options:r.tagsInC,label:"Select a Tag"},null,8,["modelValue","options"])])),_:1}),(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{header:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Added")])),_:1}),(0,l.Wm)(w,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.wordData["c"]["added"],(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{key:e},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[c]]))),128))])),_:1}),(0,l.Wm)(i,{header:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Retained")])),_:1}),(0,l.Wm)(w,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.wordData["c"]["retained"],(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{key:e},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[c]]))),128))])),_:1}),(0,l.Wm)(i,{header:""},{default:(0,l.w5)((()=>[(0,l.Uk)("Dropped")])),_:1}),(0,l.Wm)(w,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.wordData["c"]["dropped"],(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{key:e},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[c]]))),128))])),_:1})])),_:1})])),_:1})])])}const P={components:{},props:{wordSetDiffs:{required:!0}},setup(e){const{wordSetDiffs:t}=(0,w.BK)(e),a=(0,w.iH)(""),o=(0,w.iH)(""),r=(0,w.iH)(""),d=(0,l.Fl)((()=>Object.keys(t.value))),s=(0,l.Fl)((()=>{const e={a:{added:[],retained:[],dropped:[]},b:{added:[],retained:[],dropped:[]},c:{added:[],retained:[],dropped:[]}};return""!=a.value&&(e["a"]=t.value[a.value]),""!=o.value&&(e["b"]=t.value[o.value]),""!=r.value&&(e["c"]=t.value[r.value]),e})),n=(0,l.Fl)((()=>{const e=d.value.slice();let t=d.value.indexOf(o.value);return t>-1&&e.splice(t,1),t=d.value.indexOf(r.value),t>-1&&e.splice(t,1),e})),u=(0,l.Fl)((()=>{const e=d.value.slice();let t=d.value.indexOf(a.value);return t>-1&&e.splice(t,1),t=d.value.indexOf(r.value),t>-1&&e.splice(t,1),e})),i=(0,l.Fl)((()=>{const e=d.value.slice();let t=d.value.indexOf(a.value);return t>-1&&e.splice(t,1),t=d.value.indexOf(o.value),t>-1&&e.splice(t,1),e}));return{tagsInA:n,tagsInB:u,tagsInC:i,tagA:a,tagB:o,tagC:r,tags:d,wordData:s}}};var B=a(4458),O=a(3190),A=a(7887),x=a(3115),H=a(3246),I=a(490),z=a(1233),C=a(1136);const j=(0,b.Z)(P,[["render",R]]),F=j;q()(P,"components",{QCard:B.Z,QCardSection:O.Z,QSelect:A.Z,QItemLabel:x.Z,QList:H.Z,QItem:I.Z,QItemSection:z.Z}),q()(P,"directives",{Ripple:C.Z});var Q=a(289);const{subtractFromDate:K,formatDate:V}=g.ZP,L={components:{ReportPeriodSelector:D.Z,DiffOfAggregateStatsByTag:h,DiffOfWordUsageByTag:F},setup(){const e=new Q.Z,t=(0,w.iH)([]),a=(0,w.iH)([]),l=(0,w.iH)([]),o=Date.now(),r=K(o,{days:7});var d=V(o,"MMM DD, YYYY"),s=V(r,"MMM DD, YYYY");const n=(0,w.iH)({from:s,to:d,previousFrom:"???",previousTo:"???"}),u=c.Z.getItem("dateSelection"),i=c.Z.getItem("password");null!=u&&u["saved"]>=o-864e5&&(s=V(u["from"],"MMM DD, YYYY"),d=V(u["to"],"MMM DD, YYYY"),n.value={from:s,to:d});const f=t=>{g.ZP.extractDate(n.value.from,"MMM DD, YYYY").getTime(),g.ZP.extractDate(n.value.to,"MMM DD, YYYY").getTime();b();e.getTags()},m=e=>{n.value.from=V(e.from,"MMM DD, YYYY"),n.value.to=V(e.to,"MMM DD, YYYY");const t=g.ZP.extractDate(e.from,"YYYY/MM/DD"),a=g.ZP.extractDate(e.to,"YYYY/MM/DD"),l=Date.now(),o={from:t.getTime(),to:a.getTime(),saved:l};c.Z.set("dateSelection",o),b()},D=(e,t)=>{const a=1e-6,l=100*Number(e-t),o=Number(t)+a;return o<1?"N/A":Math.round(l/o)},_=(e,t)=>{const a=[];return t.forEach((t=>{const l=t.tag,o=e.find((e=>e.tag===l));if(null==o)console.log(l+" is a new tag");else{const e=D(t.interactionsSum,o.interactionsSum),r=D(t.tweetsSum,o.tweetsSum),d=D(t.likesSum,o.likesSum),s=D(t.quoteSum,o.quoteSum),n=D(t.retweetSum,o.retweetSum),u=D(t.replySum,o.replySum),i=D(t.uniqueCommentorsSum,o.uniqueCommentorsSum),f={tag:l,interactionsDiff:e,tweetsDiff:r,likesDiff:d,quotesDiff:s,retweetsDiff:n,repliesDiff:u,uniqueCommentorsDiff:i};a.push(f)}})),a},v=(e,t)=>{const a={};for(const l in t){if(!(l in e)){console.log(l+"is new.");continue}const o=t[l].map((e=>e[0])),r=e[l].map((e=>e[0])),d=o.slice(0,10),s=r.slice(0,10),n=W(s,d);n["tag"]=l,a[l]=n}return a},W=(e,t)=>{const a=new Set(e),l=new Set(t),o=new Set([...a].filter((e=>!l.has(e)))),r=new Set([...l].filter((e=>!a.has(e)))),d=new Set([...l].filter((e=>a.has(e))));return{added:Array.from(r),retained:Array.from(d),dropped:Array.from(o)}},b=()=>{const o=n.value,r="MMM DD, YYYY",d=g.ZP.extractDate(o.from,r).getTime()/1e3,s=g.ZP.addToDate(g.ZP.extractDate(o.to,r),{days:1}).getTime()/1e3,u=s-d,i=d-1,f=i-u;o["previousFrom"]=V(1e3*f,r),o["previousTo"]=V(1e3*i,r);const m=e.getDataForPeriod([],d,s),w=e.getDataForPeriod([],f,i);a.value=_(w["engagementDataByTagForPeriod"],m["engagementDataByTagForPeriod"]),t.value=e.getUsers(),l.value=v(w["weightedWordCount"],m["weightedWordCount"])};if(null==i){const t=(0,p.Z)();t.dialog({title:"Prompt",message:"Password?",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((t=>{e.loadDatabase(t).then((e=>{e?(c.Z.set("password",t),f()):c.Z.remove("password")}))}))}else{const t=c.Z.getItem("password");e.loadDatabase(t).then((e=>{e?f():c.Z.remove("password")}))}return{dateRange:n,users:t,diffOfAggregateStatsByTag:a,diffOfWordUsageByTag:l,handleReportRequested:m}}};var N=a(9885),E=a(4455);const G=(0,b.Z)(L,[["render",m]]),J=G;q()(L,"components",{QPage:N.Z,QBtn:E.Z})}}]);