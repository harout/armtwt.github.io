"use strict";(globalThis["webpackChunktwitter_stats_display"]=globalThis["webpackChunktwitter_stats_display"]||[]).push([[416],{5416:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(9835),o=a(6970);const r={class:"col-xs-12 col-sm-12 col-md-12"},i={class:"row q-mt-md text-h5"},n={class:"row q-mt-md q-gutter-sm"},l={class:"row q-col-gutter-md q-mt-md q-mr-md q-ml-md"},g={class:"col-xs-12 col-sm-12 col-md-12 col-lg-12"};function m(e,t,a,m,u,f){const d=(0,s.up)("ReportPeriodSelector"),c=(0,s.up)("q-btn"),p=(0,s.up)("DiffOfAggregateStatsByTag"),D=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(D,{class:"row q-pl-md q-pr-md q-pb-lg"},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("div",i," Twitter Statistics for "+(0,o.zw)(m.dateRange.from)+" to "+(0,o.zw)(m.dateRange.to)+" vs. "+(0,o.zw)(m.dateRange.previousFrom)+" to "+(0,o.zw)(m.dateRange.previousTo),1),(0,s._)("div",n,[(0,s.Wm)(d,{from:m.dateRange.from,to:m.dateRange.to,onReportRequested:m.handleReportRequested},null,8,["from","to","onReportRequested"]),(0,s.Wm)(c,{type:"a",href:"./#/",label:"Main Report",push:""}),(0,s.Wm)(c,{type:"a",href:"./#/topics",label:"Topics",push:""}),(0,s.Wm)(c,{type:"a",href:"./#/tags",label:"Tags",push:""})]),(0,s._)("div",l,[(0,s._)("div",g,[(0,s.Wm)(p,{series:m.diffOfAggregateStatsByTag},null,8,["series"])])])])])),_:1})}a(9665);var u=a(499),f=a(4170),d=a(3703),c=a(1446),p=a(1168);const D={class:""};function w(e,t,a,r,i,n){const l=(0,s.up)("q-td"),g=(0,s.up)("q-table");return(0,s.wg)(),(0,s.iD)("div",D,[(0,s.Wm)(g,{title:"Percentage Increase/Decrese for Aggregate Stats Over Period by Tag",rows:a.series,columns:r.columns,pagination:r.pagination,"row-key":"tag",dense:"","binary-state-sort":""},{"body-cell":(0,s.w5)((e=>[(0,s.Wm)(l,{props:e},{default:(0,s.w5)((()=>[(0,s._)("span",{class:(0,o.C_)(e.value<=0?"negativePercentage":"positivePercentage")},(0,o.zw)(e.value)+"%",3)])),_:2},1032,["props"])])),"body-cell-tag":(0,s.w5)((e=>[(0,s.Wm)(l,{props:e},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.value),1)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination"])])}const Y={props:{series:{required:!0,type:Object}},setup(e){const t={rowsPerPage:100,sortBy:"interactionsDiff",descending:!0},a=[{name:"tag",label:"Tag",field:"tag",sortable:!0,align:"left"},{name:"interactionsDiff",label:"Interactions",field:"interactionsDiff",sortable:!0,align:"right"},{name:"tweetsDiff",label:"Tweets",field:"tweetsDiff",sortable:!0,sort:(e,t,a,s)=>parseInt(e,10)-parseInt(t,10),align:"right"},{name:"likesDiff",label:"Likes",field:"likesDiff",sortable:!0,align:"right"},{name:"quotesDiff",label:"Quote Tweets",field:"quotesDiff",sortable:!0,align:"right"},{name:"retweetsDiff",label:"Retweets",field:"retweetsDiff",sortable:!0,align:"right"},{name:"repliesDiff",label:"Replies",field:"repliesDiff",sortable:!0,align:"right"}];return{columns:a,pagination:t}}};var v=a(1639),b=a(4356),M=a(7220),T=a(9984),h=a.n(T);const q=(0,v.Z)(Y,[["render",w]]),y=q;h()(Y,"components",{QTable:b.Z,QTd:M.Z});var S=a(289);const{subtractFromDate:Z,formatDate:P}=f.ZP,R={components:{ReportPeriodSelector:p.Z,DiffOfAggregateStatsByTag:y},setup(){const e=new S.Z,t=(0,u.iH)([]),a=(0,u.iH)([]),s=(0,u.iH)([]),o=Date.now(),r=Z(o,{days:7});var i=P(o,"MMM DD, YYYY"),n=P(r,"MMM DD, YYYY");const l=(0,u.iH)({from:n,to:i,previousFrom:"???",previousTo:"???"}),g=d.Z.getItem("dateSelection"),m=d.Z.getItem("password");null!=g&&g["saved"]>=o-864e5&&(n=P(g["from"],"MMM DD, YYYY"),i=P(g["to"],"MMM DD, YYYY"),l.value={from:n,to:i});const p=t=>{f.ZP.extractDate(l.value.from,"MMM DD, YYYY").getTime(),f.ZP.extractDate(l.value.to,"MMM DD, YYYY").getTime();v();e.getTags()},D=e=>{l.value.from=P(e.from,"MMM DD, YYYY"),l.value.to=P(e.to,"MMM DD, YYYY");const t=f.ZP.extractDate(e.from,"YYYY/MM/DD"),a=f.ZP.extractDate(e.to,"YYYY/MM/DD"),s=Date.now(),o={from:t.getTime(),to:a.getTime(),saved:s};d.Z.set("dateSelection",o),v()},w=(e,t)=>{const a=1e-6,s=100*Number(e-t),o=Number(t)+a;return o<1?"N/A":Math.round(s/o)},Y=(e,t)=>{const a=[];return t.forEach((t=>{const s=t.tag,o=e.find((e=>e.tag===s));if(null==o)console.log(s+" is a new tag");else{const e=w(t.interactionsSum,o.interactionsSum),r=w(t.tweetsSum,o.tweetsSum),i=w(t.likesSum,o.likesSum),n=w(t.quoteSum,o.quoteSum),l=w(t.retweetSum,o.retweetSum),g=w(t.replySum,o.replySum),m=w(t.uniqueCommentorsSum,o.uniqueCommentorsSum),u={tag:s,interactionsDiff:e,tweetsDiff:r,likesDiff:i,quotesDiff:n,retweetsDiff:l,repliesDiff:g,uniqueCommentorsDiff:m};a.push(u)}})),a},v=()=>{const o=l.value,r="MMM DD, YYYY",i=f.ZP.extractDate(o.from,r).getTime()/1e3,n=f.ZP.addToDate(f.ZP.extractDate(o.to,r),{days:1}).getTime()/1e3,g=n-i,m=i-1,u=m-g;o["previousFrom"]=P(1e3*u,r),o["previousTo"]=P(1e3*m,r);const d=e.getDataForPeriod([],i,n),c=e.getDataForPeriod([],u,m);a.value=Y(c["engagementDataByTagForPeriod"],d["engagementDataByTagForPeriod"]),t.value=e.getUsers(),s.value=wordUsageDiffsByTag(c["weightedWordCount"],d["weightedWordCount"])};if(null==m){const t=(0,c.Z)();t.dialog({title:"Prompt",message:"Password?",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((t=>{e.loadDatabase(t).then((e=>{e?(d.Z.set("password",t),p()):d.Z.remove("password")}))}))}else{const t=d.Z.getItem("password");e.loadDatabase(t).then((e=>{e?p():d.Z.remove("password")}))}return{dateRange:l,users:t,diffOfAggregateStatsByTag:a,handleReportRequested:D}}};var _=a(9885),k=a(4455);const W=(0,v.Z)(R,[["render",m]]),x=W;h()(R,"components",{QPage:_.Z,QBtn:k.Z})}}]);